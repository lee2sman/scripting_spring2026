<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
            <title>Building a chat application with Node.js
libraries</title>
      <link rel="stylesheet" href="../css/../css/panblog.css" />

      <meta property="og:title" content="Building a chat application
with Node.js libraries" />
                  <meta property="og:type" content="article" />
  </head>
  <body>
      <header> <nav>
  <ul>
    <li><a href="/scripting_spring2026">home</a></li>
    <li><a href="/scripting_spring2026/about">about</a></li>
    <li><a href="/scripting_spring2026/syllabus">syllabus</a></li>
  </ul>
</nav> </footer>
      <h1>Building a chat application with Node.js libraries</h1>
            <h2 id="schedule">Schedule</h2>
            <ol type="1">
            <li>warm-up</li>
            <li>Express library</li>
            <li>Our stack: Node.js, Express, Socket.io</li>
            <li>“CoolChat” - Node.js with Express and Socket.io</li>
            <li>Node libraries</li>
            <li>Clock assignment - 1-on-1s and studio time</li>
            </ol>
            <h4
            id="game-and-performance-talk-with-kristin-mcwharter">Game
            and Performance Talk with Kristin McWharter</h4>
            <p>4:45pm</p>
            <p><a
            href="https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.google.com%2Furl%3Fq%3Dhttps%3A%2F%2Fpurchase.zoom.us%2Fj%2F91560118245%3Fpwd%253DTTdyYU8xVEpBcVA4V0tTOWFhNjcxUT09%26sa%3DD%26source%3Dcalendar%26usd%3D2%26usg%3DAOvVaw0977OLrPIlE9HO2TZr4ab6&amp;data=05%7C02%7Clee.tusman%40purchase.edu%7Cb9a81613f68a45d383b708dc4765d15d%7C955b907a201b4c78b49c0fba54eb870d%7C0%7C0%7C638463749868873877%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C0%7C%7C%7C&amp;sdata=UdTENzx2bLCdFZ%2Fz6yIuLcBTV8P3Vhx4wT2uyitn72Q%3D&amp;reserved=0">Zoom</a></p>
            <blockquote>
            <p>Kristin McWharter uses performance and play to
            interrogate the relationship between competition and
            intimacy. Her work conjoins viewers within immersive
            sculptural installations and viewer-inclusive performances
            that critically fuse folk games within virtual and augmented
            worlds. Her software installations and performative objects
            incorporate experimental technologies and playful
            interaction to produce performances that speculate upon
            alternative forms of social behavior. Inspired by 20th
            century sports narrative, collective decision making, and
            technology as a contemporary spiritual authority, her work
            blurs the boundaries of intimacy and hype culture to
            challenge viewer’s relationships to affection and
            competitive drive within our current social context. Her
            work has been exhibited at The Hammer Museum, Walt Disney
            Concert Hall, Bangkok Arts and Cultural Center, Ars
            Electronica, Museo Altillo Beni, and FILE Festival.
            McWharter received her MFA from UCLA in Design Media Arts
            and is currently an Assistant Professor in Art &amp;
            Technology Studies at SAIC where she teaches courses:
            experimental media, New Realities: Simulations of Future
            Worlds and virtual reality.</p>
            </blockquote>
            <h3 id="more-about-express">More about Express</h3>
            <p>What does Express do for us? Why are we using it?</p>
            <p>Let’s visit the <a
            href="https://expressjs.com/">website</a> for Express.</p>
            <p>It explains that Express is a fast, unopionated
            <em>minimalist web framework</em>. Fast is obvious.
            Unopinionated is coder-speak for: “you can write code any
            which way you please. There isn’t a single way you have to
            write it if you use our library with it.” Okay, but what is
            a <strong>web framework?</strong></p>
            <p>Express provides a simple way (a mini “language”) to
            serve pages. It is like a switchboard operator that receives
            a call (“Hello, I’d like to speak to lee in Henley-4562”).
            What are we routing? When a user requests a particular
            webpage, that gets routed via our code, and specific content
            (“a view”) is served.</p>
            <p>How does this work? Express looks for the route specified
            in the URL bar.</p>
            <p>MyWebsite.com/theRouteIamRequesting</p>
            <p>the Route looks like a sub-folder, but it’s actually a
            bit of information that is communicated. Express takes this
            info, and then figures out what to display.</p>
            <h3 id="intro-to-socket.io">Intro to Socket.io</h3>
            <p><em>–resources from <a
            href="https://glitch.com/edit/#!/haunted-house-site">Todd
            Anderson</a></em></p>
            <p><strong>For this tutorial, our starter code and learning
            resource can be found <a
            href="https://glitch.com/edit/#!/haunted-house-site">here</a>.
            Our <em>front door</em> is <a
            href="https://haunted-house-site.glitch.me/">here</a>.</strong></p>
            <p><a href="http://socket.io">Socket.io</a> is a javascript
            library that runs in both the browser and server to allow
            realtime communication between the two. This allows for
            collaborative web experiences where many people can interact
            on the same page, all without using a cumbersome database or
            even much backend code.</p>
            <p>Socket.io does this by having both a client-side and a
            server-side library which communicate with each other
            through named events that pass between the two (similar to
            the way keyboard and mouse events are handled).</p>
            <p>Below is a rough guide to how socket.io works on the
            client side and on the server side, and how the two
            communicate.</p>
            <h3 id="client-side">Client Side</h3>
            <p>On the client side, the socket.io client library needs to
            be included in the HTML:</p>
            <div class="sourceCode" id="cb1"><pre
            class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>script src<span class="op">=</span> <span class="st">&#39;https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js&#39;</span><span class="op">&gt;&lt;/</span>script<span class="op">&gt;</span></span></code></pre></div>
            <p>And the following line needs to be included at the top of
            your client.js file:</p>
            <div class="sourceCode" id="cb2"><pre
            class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> socket <span class="op">=</span> <span class="fu">io</span>()</span></code></pre></div>
            <p>The client can then send messages to the server in the
            following form</p>
            <div class="sourceCode" id="cb3"><pre
            class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">//the function takes a string and then an object full of data (any size)</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>socket<span class="op">.</span><span class="fu">emit</span>(<span class="st">&#39;nameOfEvent&#39;</span><span class="op">,</span> {<span class="dt">data</span><span class="op">:</span> <span class="st">&quot;data you are sending to the server&quot;</span>})</span></code></pre></div>
            <p>And the client can listen for messages from the server
            like so:</p>
            <div class="sourceCode" id="cb4"><pre
            class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>socket<span class="op">.</span><span class="fu">on</span>(<span class="st">&#39;nameOfServerEvent&#39;</span><span class="op">,</span> <span class="kw">function</span>(data){</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">//the code you want to use on the data sent back from the server</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
            <h3 id="server-side">Server Side</h3>
            <p>Just about all of your socket.io programs are going to
            want the following boilerplate in the server.js file.</p>
            <p><a href="https://glitch.com/~socketio-chat">starter
            code</a></p>
            <div class="sourceCode" id="cb5"><pre
            class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> socket <span class="op">=</span> <span class="pp">require</span>(<span class="st">&#39;socket.io&#39;</span>)<span class="op">;</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> io <span class="op">=</span> <span class="fu">socket</span>(server)<span class="op">;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>io<span class="op">.</span><span class="at">sockets</span><span class="op">.</span><span class="fu">on</span>(<span class="st">&#39;connection&#39;</span><span class="op">,</span> newConnection)<span class="op">;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co">//This function will be called whenever a new web browser visits the page. It runs as soon as a connection is set up with the server.</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">newConnection</span>(socket){</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&#39;new connection: &#39;</span> <span class="op">+</span> socket<span class="op">.</span><span class="at">id</span>)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">//we put all the rest of our code inside that connection, because we only want it to run once we&#39;re connected</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  <span class="co">//this section will have one or more event listeners that line up with various things that can happen on the client side (like sending a message in a chat app)</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    socket<span class="op">.</span><span class="fu">on</span>(<span class="st">&#39;myEvent&#39;</span><span class="op">,</span> myEventHandler)<span class="op">;</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">myEventHandler</span>(data){</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">//what you do in response to the event goes here</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">//often you&#39;ll want one of the four &#39;emit&#39; events listed below</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>    socket<span class="op">.</span><span class="at">broadcast</span><span class="op">.</span><span class="fu">emit</span>(<span class="st">&#39;myServerEvent&#39;</span><span class="op">,</span> data)<span class="op">;</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
            <p><strong>Server Side Cheat Sheet</strong></p>
            <div class="sourceCode" id="cb6"><pre
            class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>  socket<span class="op">.</span><span class="fu">emit</span>(<span class="st">&#39;hello&#39;</span><span class="op">,</span> <span class="st">&#39;can you hear me?&#39;</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="st">&#39;abc&#39;</span>)<span class="op">;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">// sending to all clients except sender</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  socket<span class="op">.</span><span class="at">broadcast</span><span class="op">.</span><span class="fu">emit</span>(<span class="st">&#39;broadcast&#39;</span><span class="op">,</span> <span class="st">&#39;hello friends!&#39;</span>)<span class="op">;</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">// sending to all clients in &#39;game&#39; room except sender</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  socket<span class="op">.</span><span class="fu">to</span>(<span class="st">&#39;game&#39;</span>)<span class="op">.</span><span class="fu">emit</span>(<span class="st">&#39;nice game&#39;</span><span class="op">,</span> <span class="st">&quot;let&#39;s play a game&quot;</span>)<span class="op">;</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="co">// sending to all clients in &#39;game1&#39; and/or in &#39;game2&#39; room, except sender</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  socket<span class="op">.</span><span class="fu">to</span>(<span class="st">&#39;game1&#39;</span>)<span class="op">.</span><span class="fu">to</span>(<span class="st">&#39;game2&#39;</span>)<span class="op">.</span><span class="fu">emit</span>(<span class="st">&#39;nice game&#39;</span><span class="op">,</span> <span class="st">&quot;let&#39;s play a game (too)&quot;</span>)<span class="op">;</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  <span class="co">// sending to all clients in &#39;game&#39; room, including sender</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  io<span class="op">.</span><span class="fu">in</span>(<span class="st">&#39;game&#39;</span>)<span class="op">.</span><span class="fu">emit</span>(<span class="st">&#39;big-announcement&#39;</span><span class="op">,</span> <span class="st">&#39;the game will start soon&#39;</span>)<span class="op">;</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>  <span class="co">// sending to individual socketid (private message)</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>  io<span class="op">.</span><span class="fu">to</span>(socketId)<span class="op">.</span><span class="fu">emit</span>(<span class="st">&#39;hey&#39;</span><span class="op">,</span> <span class="st">&#39;I just met you&#39;</span>)<span class="op">;</span></span></code></pre></div>
            <h3 id="message-passing-example-chat-room">Message Passing
            Example: Chat Room</h3>
            <p>A user logs into a chat room using socket.io. Once the
            page loads a connection is established, giving the user a
            unique id and trigger the newConnection function through the
            following part of the server code</p>
            <div class="sourceCode" id="cb7"><pre
            class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>io<span class="op">.</span><span class="at">sockets</span><span class="op">.</span><span class="fu">on</span>(<span class="st">&#39;connection&#39;</span><span class="op">,</span> newConnection)<span class="op">;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">newConnection</span>(socket){</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a> <span class="co">//...</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
            <p>The user enters their username on the client, and then
            types and sends a message into the chatroom. The following
            client-side code sends the message:</p>
            <div class="sourceCode" id="cb8"><pre
            class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>socket<span class="op">.</span><span class="fu">emit</span>(<span class="st">&#39;newMsg&#39;</span><span class="op">,</span> {<span class="dt">username</span><span class="op">:</span>username<span class="op">,</span> <span class="dt">msg</span><span class="op">:</span>msg})<span class="op">;</span></span></code></pre></div>
            <p>This is then handled by the appropriate handler on the
            server (with the matching name):</p>
            <div class="sourceCode" id="cb9"><pre
            class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">newConnection</span>(socket){</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>   socket<span class="op">.</span><span class="fu">on</span>(<span class="st">&#39;newMsg&#39;</span><span class="op">,</span> <span class="kw">function</span>(data){</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>     <span class="co">//the same data from the client is sent to all other clients</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>     socket<span class="op">.</span><span class="at">broadcast</span><span class="op">.</span><span class="fu">emit</span>(<span class="st">&#39;newMsgFromServer&#39;</span><span class="op">,</span> data)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>   }</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
            <p>The server receives the message and then sends it out to
            all other connected clients. This message from the server is
            then handled by the following code on the client:</p>
            <div class="sourceCode" id="cb10"><pre
            class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>socket<span class="op">.</span><span class="fu">on</span>(<span class="st">&#39;newMsgFromServer&#39;</span><span class="op">,</span> <span class="kw">function</span>(data){</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">addMsg</span>(data<span class="op">.</span><span class="at">username</span><span class="op">,</span> data<span class="op">.</span><span class="at">msg</span>)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co">//This function uses jQuery to add the message to the HTML</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">addMsg</span>(user<span class="op">,</span> msg){</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">$</span>(<span class="st">&#39;#messages&#39;</span>)<span class="op">.</span><span class="fu">append</span>(<span class="st">&quot;&lt;p&gt;&lt;strong&gt;&quot;</span><span class="op">+</span>user<span class="op">+</span><span class="st">&quot;: &lt;/strong&gt;&quot;</span><span class="op">+</span>msg<span class="op">+</span><span class="st">&quot;&lt;/p&gt;&quot;</span>)</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
            <h3
            id="chatroom-with-node.js-express-and-socket.io">Chatroom
            with Node.js, Express and Socket.io</h3>
            <h4 id="parts">Parts</h4>
            <p><strong>Node.js</strong> to manage the server.</p>
            <p><strong>Express</strong> to handle the routes.</p>
            <p><strong>Socket.io</strong> for sending messages.</p>
            <p><a
            href="https://glitch.com/edit/#!/cool-chat?path=README.md%3A1%3A0">CoolChat</a>
            starter code</p>
            <h3 id="adding-npm-packages-on-glitch.com">Adding NPM
            packages on Glitch.com</h3>
            <p>When you click package.json you have the ability to
            install additional npm packages. By clicking Add Package,
            you may access any package from the NPM registry.</p>
            <figure>
            <img
            src="../images/11a34379ec88e4aed522078a1fa938788ea88306.png"
            alt="add a npm package on glitch" />
            <figcaption aria-hidden="true">add a npm package on
            glitch</figcaption>
            </figure>
            <h2 id="homework-finish-custom-clock">Homework: finish
            custom clock</h2>
            <p>This is a project to use the Date() API in the browser to
            flex your muscle with HTML, CSS and JS to build a web
            application. You can choose what you want to make with this
            framework, but make it unique. Show us your creative
            take.</p>
            <p>Examples:</p>
            <ul>
            <li>a world clock showing multiple time zones at once</li>
            <li>a countdown clock til death (sorry!) (or analog clock
            that shows the phases you’ll have in life)</li>
            <li>a digital cuckoo clock</li>
            <li>Adding in images</li>
            <li>Build an experimental advent calendar</li>
            </ul>
            <p>This project is due Apr 3</p>
            <p>This project will be evaluated by:</p>
            <ul>
            <li>Concept and originality</li>
            <li>Code quality</li>
            <li>Design and Functionality</li>
            </ul>
      <footer> <hr>
<p><em>Lee Tusman 2026. CC BY. Built with <a href="https://github.com/lee2sman/panblog">panblog</a>.</em></p> </footer>
  </body>
</html>
