<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
            <title>An introduction to Node</title>
      <link rel="stylesheet" href="../css/../css/panblog.css" />

      <meta property="og:title" content="An introduction to Node" />
                  <meta property="og:type" content="article" />
  </head>
  <body>
      <header> <nav>
  <ul>
    <li><a href="/scripting_spring2026">home</a></li>
    <li><a href="/scripting_spring2026/about">about</a></li>
  </ul>
</nav> </footer>
      <h1>An introduction to Node</h1>
            <h1 id="today">Today</h1>
            <ul>
            <li>More extensions: injecting scripts</li>
            <li>Node</li>
            <li>NPM</li>
            <li>Express (library)</li>
            </ul>
            <h2 id="injecting-scripts-in-a-web-extension">Injecting
            scripts in a web extension</h2>
            <h4 id="add-our-manifest">Add our manifest</h4>
            <p>We always start with our manifest json file. It tells the
            Browser important metadata about our extension, that will be
            used in the Browser and when published on the Chrome Web
            Store, as well as what additional files and permissions our
            extension needs.</p>
            <p>We’ll start with the minimum required information.</p>
            <div class="sourceCode" id="cb1"><pre
            class="sourceCode json"><code class="sourceCode json"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;manifest_version&quot;</span><span class="fu">:</span> <span class="dv">3</span><span class="fu">,</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Reading time&quot;</span><span class="fu">,</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;version&quot;</span><span class="fu">:</span> <span class="st">&quot;1.0&quot;</span><span class="fu">,</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Add the estimated reading time to articles&quot;</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
            <h4 id="add-icons">Add icons</h4>
            <p>Our next step is to add an icon, like we’ve done
            previously. You can specify multiple sizes 16pixels, 32
            pixels, 48pixels, 128pixels.</p>
            <p>Put the manifest in the root folder of your project.
            Let’s add icons for use with our extension. You can use free
            software like Krita or a paid program like Photoshop to
            create your icon sizes.</p>
            <div class="sourceCode" id="cb2"><pre
            class="sourceCode json"><code class="sourceCode json"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;icons&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;16&quot;</span> <span class="fu">:</span> <span class="st">&quot;images/favicon-16x16.png&quot;</span><span class="fu">,</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;32&quot;</span> <span class="fu">:</span> <span class="st">&quot;images/favicon-32x32.png&quot;</span><span class="fu">,</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;48&quot;</span> <span class="fu">:</span> <span class="st">&quot;images/favicon-48x48.png&quot;</span><span class="fu">,</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;128&quot;</span> <span class="fu">:</span> <span class="st">&quot;images/favicon-128x128.png&quot;</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
            <p>These different file sizes are used on various pages:
            16px for the favicon and toolbar, 32px for Windows machines,
            48px for the Extensions page, 128px for the Chrome Web
            Store.</p>
            <h4 id="create-a-content-script">Create a content
            script</h4>
            <p>A <em>content script</em> is a script that can modify any
            webpage we browse. We need to create this script and then
            link to it in our manifest. Let’s add to our manifest first.
            In this code we are specifying our script and css pages to
            add that will alter the currently browsed site. We also
            specify that it should act on any website we are browsing.
            If we wanted it to only work on a specific URL we could have
            it match that URL instead. For example, if we wanted our
            extension to only work on YouTube we would alter our
            <em>matches</em> from <code>&lt;all_urls&gt;</code> to
            <code>https://www.youtube.com/*</code>.</p>
            <p>I’ve added a sub-folder css for our injected stylesheet
            and scripts to hold our injected javascript code.</p>
            <div class="sourceCode" id="cb3"><pre
            class="sourceCode json"><code class="sourceCode json"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a> <span class="er">&quot;content_scripts&quot;:</span> <span class="ot">[</span><span class="fu">{</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;css&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;css/main.css&quot;</span><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;js&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;scripts/main.js&quot;</span><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;matches&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;&lt;all_urls&gt;&quot;</span><span class="ot">]</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>   <span class="fu">}</span><span class="ot">]</span></span></code></pre></div>
            <h3 id="write-our-script">Write our script</h3>
            <p>Our extension will tell the reader how long it should
            take to read the page. Let’s add our script to main.js.</p>
            <p>We’ll build the following script up from scratch one line
            at a time. This time we are not using jQuery.</p>
            <div class="sourceCode" id="cb4"><pre
            class="sourceCode js"><code class="sourceCode javascript"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">//testing to make sure javascript gets injected in the console</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Testing our extension!&quot;</span>)<span class="op">;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co">//grab the &lt;article&gt;&lt;/article&gt; section of the site we are looking at</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> article <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">querySelector</span>(<span class="st">&quot;article&quot;</span>)<span class="op">;</span> </span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (article){ <span class="co">//only run this section if there is an article section</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>   <span class="co">//grab the &quot;article&quot; tag section content</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>   <span class="kw">let</span> text <span class="op">=</span> article<span class="op">.</span><span class="at">textContent</span><span class="op">;</span> </span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>   <span class="co">//create a regular expressions to find all the words</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>   <span class="kw">let</span> wordMatch <span class="op">=</span> <span class="ss">/</span><span class="sc">[^\s]+</span><span class="ss">/g</span><span class="op">;</span> </span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>   <span class="co">//now use it on our article text</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>   <span class="kw">let</span> words <span class="op">=</span> text<span class="op">.</span><span class="fu">matchAll</span>(wordMatch)<span class="op">;</span> </span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>   <span class="co">//how many words are there?</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>   <span class="kw">let</span> wordCount <span class="op">=</span> [<span class="op">...</span>words]<span class="op">.</span><span class="at">length</span><span class="op">;</span> </span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>   <span class="co">//let&#39;s say we can read 200 words per minute</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>   <span class="co">//divide total words by 200, then round it to get minutes</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>   <span class="kw">let</span> readingTime <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(wordCount <span class="op">/</span> <span class="dv">200</span>)<span class="op">;</span> </span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>   <span class="co">//now we&#39;ll display the total reading time on the page</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>   <span class="co">//create an empty paragraph p tag</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>   <span class="kw">let</span> badge <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">&quot;p&quot;</span>)<span class="op">;</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>   <span class="co">//the text for that paragraph, with our calculated time included</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>   badge<span class="op">.</span><span class="at">textContent</span> <span class="op">=</span> <span class="st">&quot;⏰: &quot;</span> <span class="op">+</span> readingTime <span class="op">+</span> <span class="st">&quot; minute read&quot;</span><span class="op">;</span></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>   <span class="co">//where should we place this new text? </span></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>   <span class="co">//maybe after the first h1?</span></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>   <span class="co">//grab our first h1</span></span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>   <span class="kw">let</span> firstH1 <span class="op">=</span> article<span class="op">.</span><span class="fu">querySelector</span>(<span class="st">&quot;h1&quot;</span>)<span class="op">;</span></span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>   <span class="cf">if</span> (firstH1){</span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>     firstH1<span class="op">.</span><span class="fu">append</span>(badge)<span class="op">;</span> <span class="co">//if there&#39;s an h1, put the time after that</span></span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>   } <span class="cf">else</span> {</span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> body <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="at">body</span><span class="op">;</span> <span class="co">//otherwise, place it at the beginning of the body</span></span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>    body<span class="op">.</span><span class="fu">prepend</span>(badge)<span class="op">;</span></span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>   }</span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>}<span class="vs">```</span></span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a><span class="vs">#### Test our code</span></span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a><span class="vs">Load an unpacked extension in Chrome extensions.</span></span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a><span class="vs">*Extension idea and some code adapted from Chrome for Developers documentation [Run scripts on every page](https://developer.chrome.com/docs/extensions/get-started/tutorial/scripts-on-every-tab) CC BY 4.0*</span></span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a><span class="vs">## Background on working with servers</span></span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/TNQsmPf24go?si=brKyrTVhKPXUPIa_&quot; title=&quot;YouTube video player&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share&quot; allowfullscreen&gt;&lt;/iframe&gt;</span></span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a><span class="vs">Important points:</span></span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true" tabindex="-1"></a><span class="vs">A server is a computer.</span></span>
<span id="cb4-57"><a href="#cb4-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-58"><a href="#cb4-58" aria-hidden="true" tabindex="-1"></a><span class="vs">&quot;The cloud is a marketing term&quot;</span></span>
<span id="cb4-59"><a href="#cb4-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-60"><a href="#cb4-60" aria-hidden="true" tabindex="-1"></a><span class="vs">We are referring both to the physical hardware (such as a server room) and the software running on the device.</span></span>
<span id="cb4-61"><a href="#cb4-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-62"><a href="#cb4-62" aria-hidden="true" tabindex="-1"></a><span class="vs">Our Purchase College web space uses Apache webserver. It processes requests and sends out the requested data in packets that get reassembled on the client&#39;s website.</span></span>
<span id="cb4-63"><a href="#cb4-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-64"><a href="#cb4-64" aria-hidden="true" tabindex="-1"></a><span class="vs">## Intro to NodeJS</span></span>
<span id="cb4-65"><a href="#cb4-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-66"><a href="#cb4-66" aria-hidden="true" tabindex="-1"></a><span class="vs">* Node is a version of Javascript that works outside the browser. It can run on the command line and on servers</span></span>
<span id="cb4-67"><a href="#cb4-67" aria-hidden="true" tabindex="-1"></a><span class="vs">* Node is used for writing backend applications without a browser, though it can be used to manage the server in addition to the software you write for a browser</span></span>
<span id="cb4-68"><a href="#cb4-68" aria-hidden="true" tabindex="-1"></a><span class="vs">* Download [Node](https://nodejs.org/en/)</span></span>
<span id="cb4-69"><a href="#cb4-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-70"><a href="#cb4-70" aria-hidden="true" tabindex="-1"></a><span class="vs">We&#39;ll start by running a server remotely, using Glitch.com. In the future, we can run our code on any server of our choice.</span></span>
<span id="cb4-71"><a href="#cb4-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-72"><a href="#cb4-72" aria-hidden="true" tabindex="-1"></a><span class="vs">## NPM</span></span>
<span id="cb4-73"><a href="#cb4-73" aria-hidden="true" tabindex="-1"></a><span class="vs">* NPM is the Node Package Manager</span></span>
<span id="cb4-74"><a href="#cb4-74" aria-hidden="true" tabindex="-1"></a><span class="vs">* A package manager is a kind of *app store* for the command line, sometimes for a particular operating system, such as [Homebrew](http://brew.sh) for Mac, or for a specific programming language.</span></span>
<span id="cb4-75"><a href="#cb4-75" aria-hidden="true" tabindex="-1"></a><span class="vs">* NPM is the package manager for Node software</span></span>
<span id="cb4-76"><a href="#cb4-76" aria-hidden="true" tabindex="-1"></a><span class="vs">* Each node program you write that will also use NPM software needs a ```</span>package<span class="op">.</span><span class="fu">json</span><span class="vs">``` file to list the NPM packages you want to include and use</span></span>
<span id="cb4-77"><a href="#cb4-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-78"><a href="#cb4-78" aria-hidden="true" tabindex="-1"></a><span class="vs">## Express</span></span>
<span id="cb4-79"><a href="#cb4-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-80"><a href="#cb4-80" aria-hidden="true" tabindex="-1"></a><span class="vs">* Express is a node package</span></span>
<span id="cb4-81"><a href="#cb4-81" aria-hidden="true" tabindex="-1"></a><span class="vs">* It is a simple web framework for node that can host files and get user input</span></span>
<span id="cb4-82"><a href="#cb4-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-83"><a href="#cb4-83" aria-hidden="true" tabindex="-1"></a><span class="vs">*Hello-express* [starter code](https://glitch.com/~hello-express) on Glitch.</span></span>
<span id="cb4-84"><a href="#cb4-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-85"><a href="#cb4-85" aria-hidden="true" tabindex="-1"></a><span class="vs">To use it in your program</span></span></code></pre></div>
            <p>var express = require(‘express’);</p>
            <p>//you can now create an ‘app’ //This app holds an
            instance of express and can use its functionality</p>
            <p>var app = express();</p>
            <p>var server = app.listen(4000); //listens on port 4000.
            Triggers callback.</p>
            <p>app.use(express.static(‘public’)); ```</p>
            <p>This means http://localhost:4000 will host the
            project</p>
            <h2 id="homework">Homework</h2>
            <p>Finish your own custom Chrome extension. It can be
            useful, silly, inspiring, confusing. Ideally, it’s something
            that <em>extends</em> the browser, making it do a new task,
            modifying websites in a way that serves your own need.</p>
            <p>Take a screenshot of your completed extension.</p>
            <p>Upload a compressed copy of a folder holding your
            extension to turn it in. Make sure your extension includes a
            description that explains its concept!</p>
      <footer> <hr>
<p><em>Lee Tusman 2026. CC BY. Built with <a href="https://github.com/lee2sman/panblog">panblog</a>.</em></p> </footer>
  </body>
</html>
